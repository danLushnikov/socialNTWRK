{"version":3,"file":"static/js/925.cea5e813.chunk.js","mappings":"sKAkBMA,EAAiB,WACtB,IAAMC,GAAWC,EAAAA,EAAAA,MASjB,OAPAC,EAAAA,EAAAA,YAAU,WAET,OADAF,GAASG,EAAAA,EAAAA,OACF,WACNH,GAASI,EAAAA,EAAAA,MACV,CACD,GAAG,KAGFC,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACCC,EAAAA,EAAAA,KAACC,EAAQ,KACTD,EAAAA,EAAAA,KAACE,EAAe,MAGnB,EACMD,EAAqB,WAC1B,IAAME,GAAWC,EAAAA,EAAAA,KAAY,SAACC,GAAmB,OAAKA,EAAMC,KAAKH,QAAQ,IAEzE,OACCH,EAAAA,EAAAA,KAAA,OAAKO,UAAU,+CAA8CR,SACnD,OAARI,QAAQ,IAARA,OAAQ,EAARA,EACEK,KAAI,SAAAC,GAAC,OAAIT,EAAAA,EAAAA,KAACU,EAAO,CAACC,QAASF,GAAQG,KAAKC,SAAY,IACrDC,WAGL,EACMJ,EAAkD,SAAHK,GAAqB,IAAfJ,EAAOI,EAAPJ,QAC1D,OACCb,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACCC,EAAAA,EAAAA,KAAA,OACCgB,IAAKL,EAAQM,MACbC,IAAK,IACLX,UAAU,uCACR,KACHP,EAAAA,EAAAA,KAAA,KAAGO,UAAU,UAASR,SAAEY,EAAQQ,YAChCnB,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,OAAKO,UAAU,YAAWR,SAAEY,EAAQA,WACpCX,EAAAA,EAAAA,KAAA,WAGH,EACME,EAA4B,WAEjC,IAAAkB,GAA8BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnCT,EAAOW,EAAA,GAAEE,EAAUF,EAAA,GAGpB7B,GAAWC,EAAAA,EAAAA,MAOjB,OACCI,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACCC,EAAAA,EAAAA,KAAA,YACCyB,SAAU,SAAAC,GAAC,OAAIF,EAAWE,EAAEC,cAAcC,MAAM,EAChDA,MAAOjB,EACPJ,UAAU,yCAEXP,EAAAA,EAAAA,KAAA,UACC6B,UAAU,EACVC,QAdwB,WAC1BnB,GAAWlB,GAASsC,EAAAA,EAAAA,IAAYpB,IAChCa,EAAW,GACZ,EAYGjB,UAAU,oIAIUR,SACpB,WAKJ,EAEA,UApF2B,WAC1B,OACCC,EAAAA,EAAAA,KAAA,OAAAD,UACCC,EAAAA,EAAAA,KAACR,EAAI,KAGR,C","sources":["pages/Chat/ChatPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { AnyAction } from 'redux'\r\nimport { ChatMessageType } from '../../api/chat-api'\r\nimport {\r\n\tsendMessage,\r\n\tstartMessagesListening,\r\n\tstopMessagesListening,\r\n} from '../../redux/chatReducer'\r\nimport { AppStateType } from '../../redux/reduxStore'\r\n// todo: we have bag with opening and closing websocket connection, when i move to other pages and then came back to chatPage, we added messages  without deleting previous data it's look like we added messages double times\r\nconst ChatPage: React.FC = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Chat />\r\n\t\t</div>\r\n\t)\r\n}\r\nconst Chat: React.FC = () => {\r\n\tconst dispatch = useDispatch()\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(startMessagesListening() as unknown as AnyAction)\r\n\t\treturn () => {\r\n\t\t\tdispatch(stopMessagesListening() as unknown as AnyAction)\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Messages />\r\n\t\t\t<AddMessagesForm />\r\n\t\t</div>\r\n\t)\r\n}\r\nconst Messages: React.FC = () => {\r\n\tconst messages = useSelector((state: AppStateType) => state.chat.messages)\r\n\r\n\treturn (\r\n\t\t<div className='p-10 text-left text-5xl h-96 overflow-y-auto'>\r\n\t\t\t{messages\r\n\t\t\t\t?.map(m => <Message message={m} key={Math.random()} />)\r\n\t\t\t\t.reverse()}\r\n\t\t</div>\r\n\t)\r\n}\r\nconst Message: React.FC<{ message: ChatMessageType }> = ({ message }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<img\r\n\t\t\t\tsrc={message.photo}\r\n\t\t\t\talt={'#'}\r\n\t\t\t\tclassName='inline-block rounded-full m-2 w-12'\r\n\t\t\t/>{' '}\r\n\t\t\t<b className='text-lg'>{message.userName}</b>\r\n\t\t\t<br />\r\n\t\t\t<div className='text-base'>{message.message}</div>\r\n\t\t\t<hr />\r\n\t\t</div>\r\n\t)\r\n}\r\nconst AddMessagesForm: React.FC = () => {\r\n\t//todo: refactor this code to formik or react-hooks-form\r\n\tconst [message, setMessage] = useState('')\r\n\t// const [isReady, setIsReady] = useState<'pending' | 'ready'>('pending')\r\n\r\n\tconst dispatch = useDispatch()\r\n\r\n\tconst sendMessageHandler = () => {\r\n\t\tmessage && dispatch(sendMessage(message) as unknown as AnyAction)\r\n\t\tsetMessage('')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<textarea\r\n\t\t\t\tonChange={e => setMessage(e.currentTarget.value)}\r\n\t\t\t\tvalue={message}\r\n\t\t\t\tclassName='block form-textarea rounded-xl mx-3'\r\n\t\t\t></textarea>\r\n\t\t\t<button\r\n\t\t\t\tdisabled={false}\r\n\t\t\t\tonClick={sendMessageHandler}\r\n\t\t\t\tclassName='m-3 px-10 py-2 \r\n\t\t\t\t\t\t\t\trounded-xl bg-orange-300 \r\n\t\t\t\t\t\t\t\thover:bg-orange-400 active:bg-orange-500\r\n\t\t\t\t\t\t\t\tdisabled:bg-orange-100\r\n\t\t\t\t\t\t\t\ttransition-all '\r\n\t\t\t>\r\n\t\t\t\tSend\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ChatPage\r\n"],"names":["Chat","dispatch","useDispatch","useEffect","startMessagesListening","stopMessagesListening","_jsxs","children","_jsx","Messages","AddMessagesForm","messages","useSelector","state","chat","className","map","m","Message","message","Math","random","reverse","_ref","src","photo","alt","userName","_useState","useState","_useState2","_slicedToArray","setMessage","onChange","e","currentTarget","value","disabled","onClick","sendMessage"],"sourceRoot":""}